# Environment variables for local development
# Copy this file to .env and fill in your values

# ===== AUTHENTICATION METHOD =====
# Options: "azure" (Entra ID), "ldap" (Local AD), or "none" (no auth)
AUTH_METHOD=azure

# ===== AZURE AD / ENTRA ID CONFIGURATION =====
# Use these settings when AUTH_METHOD is "azure"
# (App Registration #1 - for user authentication)
AZURE_AD_TENANT_ID=your-tenant-id
AZURE_AD_CLIENT_ID=your-oauth-client-id
AZURE_AD_CLIENT_SECRET=your-oauth-client-secret
AZURE_AD_REDIRECT_URI=http://localhost:8080/index.php

# Optional: Restrict access to specific Azure AD groups
# Comma-separated list of group object IDs
AZURE_AD_ALLOWED_GROUPS=

# ===== LOCAL ACTIVE DIRECTORY (LDAP) CONFIGURATION =====
# Use these settings when AUTH_METHOD is "ldap"
# Multiple hosts supported (comma-separated) for failover:
LDAP_HOST=dc1.company.com,dc2.company.com,dc3.company.com
LDAP_PORT=636
LDAP_USE_TLS=false
LDAP_BASE_DN=DC=company,DC=com

# Service account for LDAP searches (optional but recommended)
LDAP_BIND_DN=CN=Service Account,OU=Service Accounts,DC=company,DC=com
LDAP_BIND_PASSWORD=service-account-password

# User search filter - {username} will be replaced with login username
LDAP_USER_FILTER=(sAMAccountName={username})

# Optional: Restrict to specific AD groups
# Comma-separated list of group CNs (e.g., "Domain Admins,IT Staff")
LDAP_ALLOWED_GROUPS=

LDAP_TIMEOUT=10

# ===== MICROSOFT GRAPH API CONFIGURATION =====
# These credentials are used to manage TOTP tokens in Microsoft Entra ID
# Required API permissions:
#   - Policy.ReadWrite.AuthenticationMethod
#   - UserAuthenticationMethod.ReadWrite.All
#   - User.Read.All
#   - Directory.Read.All
# If not provided, users will be prompted to enter them via web interface
GRAPH_TENANT_ID=your-graph-tenant-id
GRAPH_CLIENT_ID=your-graph-client-id
GRAPH_CLIENT_SECRET=your-graph-client-secret

# ===== NOTES =====
# - You will still need to configure Graph API credentials
#   (App Registration #2) in the web interface after logging in
# - For LDAP: Ensure your container/server has network access to your domain controller
